<configuration>
    <!-- MASTER: ResourceManager chỉ chạy trên master -->
    <property>
        <name>yarn.resourcemanager.hostname</name>
        <value>master</value>
    </property>

    <!-- CRITICAL: TẮT NodeManager trên master -->
    <property>
        <name>yarn.nodemanager.resource.memory-mb</name>
        <value>0</value>
        <description>MASTER: Set to 0 to disable container allocation</description>
    </property>

    <property>
        <name>yarn.nodemanager.resource.cpu-vcores</name>
        <value>0</value>
        <description>MASTER: Set to 0 to disable CPU allocation</description>
    </property>

    <!-- MASTER: ResourceManager optimizations -->
    <property>
        <name>yarn.resourcemanager.nodemanagers.heartbeat-interval-ms</name>
        <value>1000</value>
        <description>Fast heartbeat for coordination</description>
    </property>

    <property>
        <name>yarn.resourcemanager.scheduler.class</name>
        <value>org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler</value>
    </property>

    <property>
        <name>yarn.scheduler.capacity.resource-calculator</name>
        <value>org.apache.hadoop.yarn.util.resource.DominantResourceCalculator</value>
    </property>

    <!-- MASTER: Global limits (applied to workers) -->
    <property>
        <name>yarn.scheduler.minimum-allocation-mb</name>
        <value>1024</value>
    </property>

    <property>
        <name>yarn.scheduler.maximum-allocation-mb</name>
        <value>256000</value>
        <description>Max per container on workers</description>
    </property>

    <property>
        <name>yarn.scheduler.maximum-allocation-vcores</name>
        <value>16</value>
        <description>Max cores per container on workers</description>
    </property>

    <!-- MASTER: ApplicationMaster settings -->
    <property>
        <name>yarn.app.mapreduce.am.resource.mb</name>
        <value>2048</value>
    </property>

    <property>
        <name>yarn.app.mapreduce.am.resource.cpu-vcores</name>
        <value>1</value>
    </property>

    <property>
        <name>yarn.resourcemanager.am.max-attempts</name>
        <value>3</value>
    </property>

    <!-- MASTER: Log aggregation -->
    <property>
        <name>yarn.log-aggregation-enable</name>
        <value>true</value>
    </property>

    <property>
        <name>yarn.nodemanager.remote-app-log-dir</name>
        <value>/usr/local/hadoop/logs/hadoop-yarn/apps</value>
    </property>

    <!-- MASTER: Environment -->
    <property>
        <name>yarn.nodemanager.env-whitelist</name>
        <value>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_HOME,PATH,LANG,TZ,HADOOP_MAPRED_HOME</value>
    </property>

    <!-- MASTER: No memory checks needed -->
    <property>
        <name>yarn.nodemanager.pmem-check-enabled</name>
        <value>false</value>
    </property>

    <property>
        <name>yarn.nodemanager.vmem-check-enabled</name>
        <value>false</value>
    </property>

    <!-- MASTER: Capacity scheduler settings -->
    <property>
        <name>yarn.resourcemanager.scheduler.capacity.ordering-policy</name>
        <value>fair</value>
    </property>

    <property>
        <name>yarn.scheduler.capacity.default.user-limit-factor</name>
        <value>10</value>
    </property>
</configuration>